const{src:src,dest:dest,watch:watch,parallel:parallel,series:series}=require("gulp"),sass=require("gulp-sass"),ejs=require("gulp-ejs"),rename=require("gulp-rename"),eslint=require("gulp-eslint"),mocha=require("gulp-mocha"),sync=require("browser-sync").create(),uglify=require("gulp-uglify");function generateCSS(e){src("./sass/**/*.scss").pipe(sass().on("error",sass.logError)).pipe(dest("public/stylesheets")).pipe(sync.stream()),e()}function generateHTML(e){src("./views/index.ejs").pipe(ejs({title:"Hello World!"})).pipe(rename({extname:".html"})).pipe(dest("public")),e()}function runLinter(e){return src(["**/*.js","!build/**","!node_modules/**"]).pipe(eslint()).pipe(eslint.format()).pipe(eslint.failAfterError()).on("end",function(){e()})}function runTests(e){return src(["**/*.test.js"]).pipe(mocha()).on("error",function(){e(new Error("Test failed"))}).on("end",function(){e()})}function watchFiles(e){watch("views/**.ejs",generateHTML),watch("sass/**.scss",generateCSS),watch(["**/*.js","!node_modules/**"],parallel(runLinter,runTests))}function browserSync(e){sync.init({server:{baseDir:"./public"}}),watch("views/**.ejs",generateHTML),watch("sass/**.scss",generateCSS),watch("./public/**.html").on("change",sync.reload)}function uglifyJS(e){src(["**/*.js","!build/**","!node_modules/**"]).pipe(uglify()).pipe(dest("build")),e()}exports.css=generateCSS,exports.html=generateHTML,exports.lint=runLinter,exports.test=runTests,exports.watch=watchFiles,exports.sync=browserSync,exports.uglify=uglifyJS,exports.default=series(runLinter,parallel(generateCSS,generateHTML,uglifyJS),runTests);